timer timeout 7:50:00 every 100

# bulk water

variable        T  equal  400
variable        dt  equal  0.0005
variable        nsteps  equal  10000000
variable        dump_freq equal 10000
variable        thermo_freq equal 1000

units           metal
boundary        p p p
atom_style      atomic

neighbor        2.0 bin
neigh_modify    every 10 delay 0 check no

read_restart    restart.inter
mass            1 15.9994
mass            2 1.007840

#variable        pot_path string ../../../../../potential/new-potential
#variable        pot_path string /scratch/gpfs/mcmuniz/Projects/DeePMD-LR/new_potential_iter1/potentials/iter3/tests_trainingdata/dpmd/train_test
#variable        pot_path string ../potentials

pair_style	deepmd graph.000.pb graph.001.pb graph.002.pb graph.003.pb 

pair_coeff	

#velocity        all create ${T} 1488 dist uniform

fix             1 all nvt temp ${T} ${T} 0.05

# reset timestep counter
timestep        ${dt}

# density profile
group           o type 1
compute         binchunk o chunk/atom bin/1d z center 0.5
fix             density_prof1 o ave/chunk 100 10 1000 binchunk density/number file density_prof.txt

thermo_style    custom step etotal pe ke ecoul evdwl elong etail density lz pxx pyy pzz
thermo          ${thermo_freq}
#fix             thermo_print all print 1000 "$(step) $(temp) $(v_e1) $(v_e2) $(v_e3) $(v_ebuck) $(v_edisp) $(v_eele) $(v_etot) $(pe) $(etotal) $(lx) $(ly) $(lz) $(vol) $(pxx) $(pyy) $(pzz) $(press)" append thermo.out screen no title "# step temp v_e1 v_e2 v_e3 v_ebuck v_edisp v_eele v_etot pe etotal lx ly lz vol pxx pyy pzz press"

# dump
dump            1 all custom 1000 lmp.lammpstrj id type x y z
dump_modify     1 format line "%d %d %20.15g %20.15g %20.15g"
dump_modify     1 sort id append yes
restart         10000 restart.inter.1 restart.inter.2

run             ${nsteps} upto

write_restart   restart.inter
write_data	datafile_final

#if "$(step) >= $(v_stopstep)" then "print $(step) file Equildone.txt"

